<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Include Firebase SDK and configuration -->
  <script src="https://www.gstatic.com/firebasejs/9.6.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.5/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.5/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.5/firebase-analytics.js"></script>

  <script>
    // Initialize Firebase with your project configuration
    const firebaseConfig = {
    apiKey: "AIzaSyBTg4dgTzK1i-YJXfTFXcC2hMoj3UIuoBg",
    authDomain: "progress-6bb50.firebaseapp.com",
    projectId: "progress-6bb50",
    storageBucket: "progress-6bb50.appspot.com",
    messagingSenderId: "1094895526120",
    appId: "1:1094895526120:web:82fdc166910ae6636b695d"
  };

    firebase.initializeApp(firebaseConfig);

    // Initialize Firebase Authentication and Realtime Database
    const auth = firebase.auth();
    const database = firebase.database();

    // Function to save video progress for the authenticated user
    function saveVideoProgress(videoId, progress) {
      const user = auth.currentUser;
      if (user) {
        const userId = user.uid;
        const progressRef = database.ref('videoProgress/' + userId + '/' + videoId);
        progressRef.set(progress);
      }
    }

    // Function to retrieve video progress for the authenticated user
    function retrieveVideoProgress(videoId) {
      const user = auth.currentUser;
      if (user) {
        const userId = user.uid;
        const progressRef = database.ref('videoProgress/' + userId + '/' + videoId);
        progressRef.once('value').then(snapshot => {
          const progress = snapshot.val();
          if (progress) {
            // Set video playback progress based on retrieved data
            const video = document.getElementById('my-video');
            video.currentTime = progress;
          }
        });
      }
    }
  </script>
</head>
<body>
  <video
    id="my-video"
    class="video-js"
    controls
    preload="auto"
    width="640"
    height="264"
    poster="MY_VIDEO_POSTER.jpg"
    data-setup="{}"
  >
    <source src="https://github.com/Methusan105/Series/releases/download/PB3/Prison.Break.S03E12.mkv" type="video/mp4" />
  </video>

  <button onclick="saveVideoProgress('video1', document.getElementById('my-video').currentTime)">Save Progress</button>
  <button onclick="retrieveVideoProgress('video1')">Retrieve Progress</button>
</body>
</html>
